name: createTag
on:
  push:
    branches:
      - main
#     tags:
#       - 'release' # question: add certain conditions in here? 

env: 
  version: EngBuild10 # question where to get version from? 
  
jobs:
  create-tag:
    runs-on: ubuntu-latest
    steps:   
    - name: Create tag
      uses: actions/github-script@v5
      with:
        script: |
          github.rest.git.createRef({
            owner: context.repo.owner,
            repo: context.repo.repo,
            ref: 'refs/tags/${{ env.version }}',

            sha: context.sha
            })
  run-workflow:
    runs-on: ubuntu-latest
    steps:
    - name: Run other workflow
      run: |
        echo "Run workflow"
        sleep 10s
    - uses: convictional/trigger-workflow-and-wait@v1.3.0
      with:
        owner: lhofer12
        repo: test_docs_target
        github_token: ${{ secrets.G_ACCESS_TOKEN }}
        workflow_file_name: Testing.yml
#       uses: tvdias/github-tagger@v0.0.1
#       with:
#         repo-token: ${{ secrets.GITHUB_TOKEN }}
#         tag: ${{ env.version }}
          
#       - name: Create Release
#         id: create_release
#         uses: actions/create-release@latest
#         with:
#           tag_name: ${{ env.version }}
#           release_name: Release ${{ github.ref }}
#           body: env.release_text
#           draft: false
#           prerelease: false
